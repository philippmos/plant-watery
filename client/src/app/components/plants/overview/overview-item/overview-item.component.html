<app-card variant="emerald" [padding]="'none'" [hoverable]="true" [shadow]="'xl'">
    <div class="group overflow-hidden flex flex-col h-full transition-all duration-300 ease-in-out hover:scale-[1.02]">
        <div class="relative overflow-hidden rounded-t-xl">
            <img [src]="data.imageUrl" alt="" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105">
            <div class="absolute inset-0 bg-gradient-to-t from-emerald-900/80 via-emerald-900/20 to-transparent"></div>
            <div class="absolute bottom-0 left-0 right-0 p-4">
                <app-badge variant="primary" [pill]="true">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <span>{{ data.locationName }}</span>
                    <span class="mx-2 text-emerald-300">•</span>
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>{{ data.lastWateredDateTime ? DateUtils.getRelativeTime(data.lastWateredDateTime) : 'Nie gegossen' }}</span>
                </app-badge>
            </div>
        </div>
        
        <div class="flex-1 p-4 bg-gradient-to-b from-transparent to-emerald-50/50 dark:to-emerald-900/50">
            <h3 class="text-xl font-bold text-white mb-5 drop-shadow-lg">{{ data.title }}</h3>

            <div class="flex gap-2 items-end">
                <app-button 
                    variant="primary" 
                    [fullWidth]="true" 
                    (clicked)="openModal()"
                    iconLeft="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10">
                    Gießen
                </app-button>

                <a [routerLink]="plantLink" class="flex-1">
                    <app-button 
                        variant="secondary" 
                        [fullWidth]="true"
                        iconLeft="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                        Details
                    </app-button>
                </a>
            </div>
        </div>
    </div>
</app-card>

<app-watering-modal [isOpen]="isModalOpen" [data]="data" (modalClose)="closeModal()"></app-watering-modal>