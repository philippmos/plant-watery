@if (isOpen) {
    <div class="fixed inset-0 flex items-center justify-center bg-emerald-900/80 backdrop-blur-sm z-50">
        <app-card variant="default" [padding]="'lg'" [shadow]="'2xl'" [rounded]="'xl'">
            <div class="w-full max-w-md mx-4">
                <div class="flex items-center space-x-3 mb-6">
                    <app-icon-container 
                        icon="water-drop" 
                        variant="emerald" 
                        size="md" 
                        [rounded]="'lg'">
                    </app-icon-container>
                    <h2 class="text-xl font-bold text-emerald-800 tracking-tight">{{ data.title }} gießen</h2>
                </div>
                
                <div class="mb-6">
                    <span class="block text-sm font-semibold text-emerald-700 mb-3">Datum und Uhrzeit</span>
                    <div class="flex gap-3">
                        <input 
                            type="date" 
                            [(ngModel)]="selectedDate"
                            class="flex-1 p-3 border-2 border-emerald-200 rounded-lg bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 hover:border-emerald-300 text-emerald-800"
                            aria-label="Datum auswählen"
                        />
                        <input 
                            type="time" 
                            [(ngModel)]="selectedTime"
                            class="flex-1 p-3 border-2 border-emerald-200 rounded-lg bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 hover:border-emerald-300 text-emerald-800"
                            aria-label="Uhrzeit auswählen"
                        />
                    </div>
                </div>

                <div class="mb-8">
                    <label for="comment-input" class="block text-sm font-semibold text-emerald-700 mb-3">Kommentar</label>
                    <textarea 
                        id="comment-input"
                        [(ngModel)]="comment" 
                        class="w-full h-28 p-3 border-2 border-emerald-200 rounded-lg bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 hover:border-emerald-300 text-emerald-800 resize-none"
                        placeholder="Füge hier einen optionalen Kommentar hinzu..."
                    ></textarea>
                </div>

                <div class="flex justify-end gap-3">
                    <app-button 
                        variant="light" 
                        (clicked)="onClose()"
                        [disabled]="isSaving()">
                        Abbrechen
                    </app-button>
                    
                    <app-button 
                        variant="primary" 
                        (clicked)="onSave()"
                        [disabled]="isSaving()"
                        [loading]="isSaving()"
                        iconLeft="M5 13l4 4L19 7">
                        @if (isSaving()) {
                            Speichern...
                        } @else {
                            Speichern
                        }
                    </app-button>
                </div>
            </div>
        </app-card>
    </div>
}